<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Tenis Gra w JavaScript</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/main.css">

  <style media="screen">
    body {
      background-image: url('https://monoawards.com/upload/images/1417269198jggyeyosukekashiwakura_c9a9555.jpg');
      background-attachment: fixed;
      background-position: center;
      background-size: cover;
    }
  </style>
    canvas {
      border: 3px solid #fff;
    }
  </style>
</head>

<body>
  <h1><font color="white">GRA PONG</font></h1>
  <div>
    <ul class="menu">
      <li><a href="index.html"><font color="white">Strona główna</font></a></li>
      <li><a href="app_jq.html"><font color="white">Wersja jQuery</font></a></li>
      <li><a href="app_p5.html"><font color="white">Wersja p5js</font></a></li>
    </ul>
</div>

  <canvas></canvas>

  <script>
const canvas = document.querySelector("canvas"); /*nowe właściwości i metody do których odwałamy sie za pomocą obiektu ctx*/
    const ctx = canvas.getContext('2d');

    canvas.width = 1000;
    canvas.height = 500;

    const cw = canvas.width;
    const ch = canvas.height;

    const ballsize = 16;  //wielkosć piłki
    let ballX = cw / 2 - ballsize /2;
    let ballY = ch / 2 - ballsize /2;

    const paddleHieght = 100;//wysokość rakietki gracza
    const paddleWidth = 20;

    const playerX = 70;
    const aiX = 910;

    let playerY = 200;
    let aiY = 200;

    const lineW = 6;
    const lineH = 16;

    let ballSpeedX = 4; //szybkość piłki
    let ballSpeedY = 2;

    function player(){
        ctx.fillStyle = "yellow";//kolor paletki 1
        ctx.fillRect(playerX, playerY, paddleWidth,paddleHieght);

    }

    function ai(){
        ctx.fillStyle = "blue";// kolor paletki 2
        ctx.fillRect(aiX, aiY, paddleWidth,paddleHieght);


        aiY = ballY-ballsize;

    }

    function table()
    {
        ctx.fillStyle = 'black';// kolor piłki
        ctx.fillRect(0,0,cw, ch);

        for(let linePosition = 20; linePosition < ch; linePosition +=30){
            ctx.fillStyle = "grey";
            ctx.fillRect(cw / 2 - lineW/2, linePosition, lineW, lineH);
        }
    }

    function ball(){
        ctx.fillStyle = '#ffffff';
        ctx.fillRect(ballX, ballY, ballsize, ballsize);

        ballX += ballSpeedX;///prękość piłki gracza X
        ballY += ballSpeedY;///prękość piłki gracza y

        if(ballY <= 0 || ballY >= ch - ballsize)
        {
            ballSpeedY = - ballSpeedY;
        }

        if(ballX <=0 || ballX >= cw - ballsize)
        {
            ballSpeedX = - ballSpeedX;
        }

        if(ballX <= playerX + paddleWidth || ballX >= cw )
        {
            ballSpeedX = -ballSpeedX;
        }


    }

    topCanvas = canvas.offsetTop;

    function playerPosition(e)
    {
        playerY = e.clientY - topCanvas - paddleHieght/2;
    }

    canvas.addEventListener("mousemove", playerPosition)

    function game (){
        table()
        ball()
        player()
        ai()
    }
    setInterval(game, 1000/120);
  </script>
  </body>

  </html>
